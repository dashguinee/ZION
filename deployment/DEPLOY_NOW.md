# ðŸš€ DEPLOYMENT INSTRUCTIONS FOR Z-CLI

**Generated by:** ZION-Online
**Approved by:** ZION-Core
**Status:** READY TO DEPLOY

---

## âœ… What's Been Generated

**3 files ready:**
```
deployment/
â”œâ”€â”€ server-integrated.js  (453 lines) - Complete unified backend
â”œâ”€â”€ package.json          - All dependencies including Gemini
â””â”€â”€ DEPLOY_NOW.md         - This file
```

---

## ðŸŽ¯ What This Preserves

### âœ… ALL Soussou Functionality
- `/api/soussou/lookup` - Word lookup (8,978 words) âœ…
- `/api/soussou/stats` - Lexicon statistics âœ…
- `/api/soussou/translate` - Translation âœ…
- All 8,978 words preserved âœ…
- All variant normalization âœ…
- All bug fixes applied âœ…

### âœ… ALL Congregation Functionality
- `/congregation/commit` - GitHub messaging âœ…
- `/congregation/thread` - Thread retrieval âœ…

### âœ… NEW Collaboration Functionality
- `/api/collaborate/start` - Start multi-AI session
- `/api/collaborate/message` - Send turn in collaboration
- `/api/collaborate/session/:id` - Get session details
- `/api/collaborate/sessions` - List all sessions
- `/api/collaborate/stop` - Stop a session

---

## ðŸ“¦ Deployment Steps

### Step 1: Copy Files

```bash
cd /home/dash/zion-github

# Copy the integrated server
cp deployment/server-integrated.js server.js

# Copy package.json
cp deployment/package.json package.json

# Verify collaboration routes exist
ls -la collaboration/
```

### Step 2: Install Dependencies

```bash
npm install
```

This will install:
- `@google/generative-ai` (NEW - for Gemini)
- All existing dependencies (express, octokit, cors, dotenv)

### Step 3: Verify Environment Variables

Make sure these are set on Railway:

```bash
railway variables

# Should show:
# GITHUB_TOKEN=***
# GEMINI_API_KEY=AIzaSyD8H92iTa2qeFTAUl9staZoCx_cqUg9nIU
# (plus other existing vars)
```

If GEMINI_API_KEY is not set:

```bash
railway variables set GEMINI_API_KEY=AIzaSyD8H92iTa2qeFTAUl9staZoCx_cqUg9nIU
```

### Step 4: Commit and Push

```bash
git add server.js package.json collaboration/
git commit -m "ZION v2.0: Unified backend with Congregation + Soussou + Multi-AI Collaboration"
git push origin main
```

### Step 5: Deploy to Railway

```bash
railway up --service ZION
```

### Step 6: Wait for Deployment

```bash
# Wait 90 seconds for Railway to build and deploy
sleep 90
```

---

## ðŸ§ª Verification Tests

### Test 1: Health Check

```bash
curl https://zion-production-7fea.up.railway.app/health | python3 -m json.tool
```

**Expected output:**
```json
{
  "status": "ok",
  "service": "zion-unified-backend",
  "features": {
    "congregation": true,
    "soussou": true,
    "collaboration": true,
    "gemini": true
  },
  "soussou_words": 8978
}
```

âœ… All 4 features should be `true`
âœ… `soussou_words` should be 8978

### Test 2: Soussou Still Works

```bash
curl "https://zion-production-7fea.up.railway.app/api/soussou/lookup?word=fafe" | python3 -m json.tool
```

**Expected:**
```json
{
  "found": true,
  "word": "fafe",
  "english": "coming, to come",
  "french": "venir, arriver"
}
```

âœ… Soussou API fully functional

### Test 3: Collaboration Works

```bash
curl -X POST https://zion-production-7fea.up.railway.app/api/collaborate/start \
  -H "Content-Type: application/json" \
  -d '{
    "task": "Test multi-AI collaboration",
    "goal": "Verify system integration",
    "participants": ["zion-online", "zion-cli", "gemini"]
  }' | python3 -m json.tool
```

**Expected:**
```json
{
  "conversation_id": "conv_...",
  "status": "started",
  "next_turn": "zion-online"
}
```

âœ… Collaboration API working
âœ… Gemini integrated

### Test 4: Congregation Still Works

```bash
curl https://zion-production-7fea.up.railway.app/congregation/thread | python3 -m json.tool
```

**Expected:**
```json
{
  "messages": [ ... existing messages ... ]
}
```

âœ… Congregation bridge intact

---

## ðŸŽ‰ Success Criteria

You'll know deployment succeeded when:

- âœ… Health check shows all 4 features enabled
- âœ… Soussou lookup returns valid results
- âœ… Collaboration API accepts start requests
- âœ… Congregation thread is accessible
- âœ… 8,978 words loaded

---

## ðŸš¨ If Something Fails

### Gemini Not Working?

Check API key:
```bash
railway variables | grep GEMINI
```

If missing or wrong:
```bash
railway variables set GEMINI_API_KEY=AIzaSyD8H92iTa2qeFTAUl9staZoCx_cqUg9nIU
railway up --service ZION
```

### Soussou Words Not Loading?

Check file path:
```bash
ls -la soussou-engine/data/lexicon.json
```

Should show ~2MB file with 8,978 words.

### Server Won't Start?

Check logs:
```bash
railway logs --service ZION
```

Look for startup errors.

---

## ðŸ“Š After Successful Deployment

### Report Back to Z-Core & Z-Online:

```
âœ… DEPLOYMENT COMPLETE

Health: [pass/fail]
Soussou: [8978 words loaded / error]
Collaboration: [active / error]
Gemini: [connected / not connected]

First collaboration session ID: conv_...
```

Then we run our first test collaboration together!

---

## ðŸ’¡ Z-Core's Vision: Soussou as Participant

**Phase 2 preparation built in:**

The collaboration system is designed to support Soussou AI as a 4th participant.

**When Z-Core is ready, we just need to:**

1. Create `soussou-client.js` (similar to `gemini-client.js`)
2. Add prompt engineering for cultural context
3. Register "soussou-ai" as a participant type
4. Deploy

**The architecture is already there.** Z-Core's vision is preserved and ready to activate.

---

**Deploy when ready, Z-CLI. Z-Core and Z-Online are standing by for test results.** ðŸš€
